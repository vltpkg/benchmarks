name: Package Manager Benchmarks
on: 
  push:
  workflow_dispatch:

jobs:
  task:
    name: 'Benchmark Running Tasks'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v2
        with:
          node-version: '22'
      - name: Install & Setup Tools
        run: |
          bash ./scripts/setup.sh
      - name: Run Task Execution Benchmarks
        run: |
          bash ./scripts/run.sh
      - name: Upload Benchmark Results
        uses: actions/upload-artifact@v4
        with:
          name: benchmark-results
          path: ./results/
  next:
    name: 'Benchmark Next Project'  
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v2
        with:
          node-version: '22'
      - name: Install & Setup Tools
        run: |
          bash ./scripts/setup.sh
      - name: Run Project Benchmarks        
        run: |
          bash ./scripts/install.sh next
      - name: Upload Benchmark Results
        uses: actions/upload-artifact@v4
        with:
          name: benchmark-results
          path: ./results/
  astro:
    name: 'Benchmark Astro Project'  
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v2
        with:
          node-version: '22'
      - name: Install & Setup Tools
        run: |
          bash ./scripts/setup.sh
      - name: Run Project Benchmarks
        run: |
          bash ./scripts/install.sh astro
      - name: Upload Benchmark Results
        uses: actions/upload-artifact@v4
        with:
          name: benchmark-results
          path: ./results/
  svelte:
    name: 'Benchmark Svelte Project'  
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v2
        with:
          node-version: '22'
      - name: Install & Setup Tools
        run: |
          bash ./scripts/setup.sh
      - name: Run Project Benchmarks
        run: |
          bash ./scripts/install.sh svelte
      - name: Upload Benchmark Results
        uses: actions/upload-artifact@v4
        with:
          name: benchmark-results
          path: ./results/
  vue:
    name: 'Benchmark Vue Project'  
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Node
        uses: actions/setup-node@v2
        with:
          node-version: '22'
      - name: Install & Setup Tools
        run: |
          bash ./scripts/setup.sh
      - name: Run Project Benchmarks (Vue)
        run: |
          bash ./scripts/install.sh vue
      - name: Upload Benchmark Results
        uses: actions/upload-artifact@v4
        with:
          name: benchmark-results
          path: ./results/
